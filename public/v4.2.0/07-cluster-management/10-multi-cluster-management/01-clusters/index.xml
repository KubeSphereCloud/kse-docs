<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>多集群管理 on KubeSphere 企业版</title>
    <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/</link>
    <description>Recent content in 多集群管理 on KubeSphere 企业版</description>
    <generator>Hugo</generator>
    <language>zh</language>
    <copyright>©2022 QingCloud, Inc. All rights reserved</copyright>
    <atom:link href="/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>查看集群列表</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/02-view-a-cluster-list/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/02-view-a-cluster-list/</guid>
      <description>本节介绍如何查看集群列表。&#xA;前提条件 您需要在 KubeSphere 企业版平台具有集群查看权限。&#xA;操作步骤 以具有集群查看权限的用户登录 KubeSphere 企业版 Web 控制台。&#xA;点击集群管理。&#xA;集群列表提供以下信息：&#xA;参数 描述 名称、标识和描述&#xA;集群的名称、标识和描述信息。&#xA;状态&#xA;集群的当前状态。&#xA;节点数量&#xA;集群中服务器节点的数量。&#xA;供应商&#xA;集群环境的提供商。&#xA;KubeSphere 版本&#xA;集群中运行的 KubeSphere 版本。&#xA;标签&#xA;集群的标签，用于对集群进行分类管理。&#xA;创建时间&#xA;集群加入 KubeSphere 企业版 Web 控制台的时间。&#xA;在列表上方点击搜索框并输入关键字，可按名称搜索集群。&#xA;在列表右上角点击可刷新列表信息。&#xA;在列表右上角点击可定制列表中显示的信息。&#xA;点击集群的名称可进入集群，管理集群中的资源。</description>
    </item>
    <item>
      <title>编辑集群信息</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/03-edit-cluster-information/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/03-edit-cluster-information/</guid>
      <description>本节介绍编辑集群信息。&#xA;您可以编辑集群的标识、提供商和描述。KubeSphere 企业版不支持编辑已添加集群的名称。&#xA;前提条件 您需要在 KubeSphere 企业版平台具有集群管理权限。&#xA;操作步骤 以具有集群管理权限的用户登录 KubeSphere 企业版 Web 控制台。&#xA;点击集群管理。&#xA;在需要操作的集群右侧点击，然后在下拉列表中选择编辑信息。&#xA;在编辑信息对话框，设置集群的别名、提供商、描述、标识，然后点击确定。&#xA;参数 描述 别名&#xA;集群的别名。&#xA;提供商&#xA;集群的提供商。在下拉列表中选择提供商。&#xA;描述&#xA;集群的描述信息。描述可包含任意字符，最长 256 个字符。&#xA;标识&#xA;集群的用途标识。</description>
    </item>
    <item>
      <title>添加集群标签</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/04-add-cluster-tags/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/04-add-cluster-tags/</guid>
      <description>本节介绍如何添加集群标签。&#xA;您可以使用标签对集群进行分类管理。&#xA;前提条件 您需要在 KubeSphere 企业版平台具有集群管理权限。&#xA;您需要提前创建集群标签。有关更多信息，请参阅创建集群标签。&#xA;对单个集群添加标签 以具有集群管理权限的用户登录 KubeSphere 企业版 Web 控制台。&#xA;点击集群管理。&#xA;在需要操作的集群右侧点击，然后在下拉列表中选择添加标签。&#xA;在添加标签对话框，选择标签的键和值，点击添加，然后点击确定。&#xA;如果没有标签满足要求，请先创建标签。标签添加后，您可以集群列表上方点击搜索框按标签搜索集群。&#xA;对多个集群添加标签 以具有集群管理权限的用户登录 KubeSphere 企业版 Web 控制台。&#xA;点击集群管理。&#xA;选择需要添加标签的集群左侧的复选框，然后在列表上方点击添加标签。&#xA;在添加标签对话框，选择标签的键和值，点击添加，然后点击确定。</description>
    </item>
    <item>
      <title>编辑成员集群配置</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/05-edit-cluster-configuration/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/05-edit-cluster-configuration/</guid>
      <description>本节介绍如何编辑成员集群的集群配置，即调整 ks-agent 配置参数。&#xA;除了在添加成员集群时进行集群配置外，成员集群被添加后，也可以编辑集群配置。&#xA;说明 当成员集群的 KubeSphere 版本与主集群的 KubeSphere 版本不一致时，无法编辑集群配置。请更新为相同版本后再操作。&#xA;前提条件 您需要在 KubeSphere 企业版平台具有集群管理权限。&#xA;操作步骤 以具有集群管理权限的用户登录 KubeSphere 企业版 Web 控制台。&#xA;点击集群管理。&#xA;在需要操作的集群右侧点击，然后在下拉列表中选择编辑配置。&#xA;在编辑配置对话框输入 ks-agent 的信息，然后点击确定。</description>
    </item>
    <item>
      <title>更新 kubeconfig</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/07-update-kubeconfig/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/07-update-kubeconfig/</guid>
      <description>本节介绍如何更新成员集群 kubeconfig 信息。&#xA;在 KubeSphere 企业版平台添加成员集群后，如果成员集群的访问信息发生变化，您需要更新成员集群的 kubeconfig 信息。&#xA;说明 KubeSphere 企业版仅支持编辑通过直接连接添加的集群的 kubeconfig 信息，不支持编辑通过代理连接添加的集群的 kubeconfig 信息。&#xA;前提条件 您需要在 KubeSphere 企业版平台具有集群管理权限。&#xA;操作步骤 以具有集群管理权限的用户登录 KubeSphere 企业版 Web 控制台。&#xA;点击集群管理。&#xA;在需要操作的集群右侧点击，然后在下拉列表中选择更新 kubeconfig。&#xA;在更新 kubeconfig 对话框输入 kubeconfig 信息，然后点击更新。&#xA;提示 您可以点击从本地上传 kubeconfig 配置文件。&#xA;主集群的 KubeSphere 企业版 Web 控制台将使用新的 kubeconfig 信息连接成员集群。</description>
    </item>
    <item>
      <title>移除成员集群</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/09-remove-a-member-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/09-remove-a-member-cluster/</guid>
      <description> 本节介绍如何移除成员集群。&#xA;说明 主集群无法移除。&#xA;成员集群移除后，KubeSphere 企业版将无法管理该集群。集群中原有的 Kubernetes 资源将不会被删除。&#xA;警告 集群被移除后，集群中原有的多集群配置数据不会被自动清除，卸载 KubeSphere 企业版或删除关联资源时可能会导致用户数据丢失。请务必在被移除的集群上执行清理多集群配置数据步骤。&#xA;前提条件 您需要在主集群和需要移除的成员集群都具有 platform-admin 角色。&#xA;通过 Web 控制台移除集群 以具有 platform-admin 角色的用户登录主集群的 Web 控制台。&#xA;点击集群管理。&#xA;在需要操作的集群右侧点击，然后在下拉列表中选择移除集群。&#xA;在移除集群对话框，确认需要移除的集群的信息，将滑块拖动到右侧，输入需要移除的集群的名称，然后点击移除。&#xA;通过命令行移除集群 某些情况下可能无法从 Web 控制台移除成员集群。例如，成员集群的凭证存在错误。在此情况下，您可以执行以下步骤通过命令行移除不健康的成员集群：&#xA;以具有 platform-admin 角色的用户登录主集群的 Web 控制台。&#xA;点击页面右上角的组件坞，选择 kubectl。&#xA;在 kubectl 对话框，执行以下命令移除成员集群（将 &amp;lt;cluster name&amp;gt; 替换为成员集群的名称）：&#xA;kubectl delete cluster &amp;lt;cluster name&amp;gt; 清理多集群配置数据 登录被移除的成员集群节点，执行以下命令清理集群中的多集群配置数据：&#xA;for ns in $(kubectl get ns --field-selector status.phase!=Terminating -o jsonpath=&amp;#39;{.items[*].metadata.name}&amp;#39;); do kubectl label ns $ns kubesphere.io/workspace- &amp;amp;&amp;amp; kubectl patch ns $ns --type merge -p &amp;#39;{&amp;#34;metadata&amp;#34;:{&amp;#34;ownerReferences&amp;#34;:[]}}&amp;#39;; done </description>
    </item>
    <item>
      <title>纳管成员集群到其他 host 集群</title>
      <link>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/11-add-a-removed-member-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/v4.2.0/07-cluster-management/10-multi-cluster-management/01-clusters/11-add-a-removed-member-cluster/</guid>
      <description> 本节介绍如何将被移除的成员集群重新纳管到其他 host 集群。&#xA;集群正常状态解绑 若成员集群在正常状态下被移除，无需额外操作，成员集群可以直接被其它 host 集群纳管，详细步骤请参阅添加成员集群。&#xA;集群异常状态解绑 若成员集群在异常状态下被移除，在成员集群上执行下面的命令来清除集群的纳管信息，之后集群可以正常被其它 host 集群纳管。&#xA;kubectl patch ns kubesphere-system --type merge -p &amp;#39;{&amp;#34;metadata&amp;#34;:{&amp;#34;annotations&amp;#34;: null}}&amp;#39; 清理多集群配置数据 集群被解绑后，集群中原有的资源和多集群配置数据不会被自动清除。如果被解绑集群存在企业空间相关配置，执行以下命令手动清理被移除集群中的配置数据后再进行纳管。&#xA;for ns in $(kubectl get ns --field-selector status.phase!=Terminating -o jsonpath=&amp;#39;{.items[*].metadata.name}&amp;#39;); do kubectl label ns $ns kubesphere.io/workspace- &amp;amp;&amp;amp; kubectl patch ns $ns --type merge -p &amp;#39;{&amp;#34;metadata&amp;#34;:{&amp;#34;ownerReferences&amp;#34;:[]}}&amp;#39;; done </description>
    </item>
  </channel>
</rss>
