<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>WizTelemetry 审计 on KubeSphere 企业版</title>
    <link>/v4.2.0/11-use-extensions/09-observability-platform/04-auditing/</link>
    <description>Recent content in WizTelemetry 审计 on KubeSphere 企业版</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <copyright>©2022 QingCloud, Inc. All rights reserved</copyright><atom:link href="/v4.2.0/11-use-extensions/09-observability-platform/04-auditing/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>查询审计日志</title>
      <link>/v4.2.0/11-use-extensions/09-observability-platform/04-auditing/01-use-audit-query-tools/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/09-observability-platform/04-auditing/01-use-audit-query-tools/</guid>
      <description>本节介绍如何查询审计日志。
审计日志：KubeSphere 企业版 API 服务器接收请求的记录，即 KubeSphere 企业版平台上用户的操作行为。
KubeSphere 企业版支持以普通用户角色或集群管理员角色查询自身权限范围内的审计日志。
启用审计 为获取审计日志数据，您需要启用 Kubernetes 和 KubeSphere 审计，即启用审计日志收集。
启用 Kubernetes 审计（可选） 开启 Kubernetes 审计会产生很多系统审计日志，增加存储资源占用的同时，过于详细的审计信息也影响审计查询体验，可以选择不开启 Kubernetes 审计，仅开启 KubeSphere 审计。
如需审计未经 KubeSphere 企业版 Web 控制台进行的操作，如审计 kubectl 操作或 K8s API 调用，可开启 Kubernetes 审计。
在集群的 master 节点上创建审计目录。
mkdir /etc/kubernetes/audit 创建 policy 文件。
vi /etc/kubernetes/audit/audit-policy.yaml apiVersion: audit.k8s.io/v1 kind: Policy rules: - level: Metadata 编辑 kube-apiserver.yaml 文件，添加以下内容。
vi /etc/kubernetes/manifests/kube-apiserver.yaml spec: containers: - command: - kube-apiserver - --audit-policy-file=/etc/kubernetes/audit/audit-policy.yaml - --audit-log-path=/etc/kubernetes/audit/audit.</description>
    </item>
    
  </channel>
</rss>
