<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>灰度发布 on KubeSphere 企业版</title>
    <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/</link>
    <description>Recent content in 灰度发布 on KubeSphere 企业版</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <copyright>©2022 QingCloud, Inc. All rights reserved</copyright><atom:link href="/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>创建灰度发布任务</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/01-create-a-grayscale-release-task/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/01-create-a-grayscale-release-task/</guid>
      <description>本节介绍如何创建灰度发布任务。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 管理权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
提前准备新版本的容器镜像并上传到容器镜像服务，同时确保容器镜像服务与 KubeSphere 企业版网络连接正常。
操作步骤 请参阅参数描述设置灰度发布任务的参数。
以具有 Service Mesh 管理权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在页面左上角的下拉列表中选择一个项目。
根据需要选择灰度发布任务的类型，将光标悬停在蓝绿部署、金丝雀发布或流量镜像区域，然后点击创建。
在基本信息页签，设置灰度发布任务的名称，然后点击下一步。
在服务设置页签，选择需要进行灰度发布的应用和服务，然后点击下一步。
在新版本设置页签，设置新版本的服务版本号、容器组副本数量和容器，然后点击下一步。
在策略设置页签，设置灰度发布任务的流量转发策略和发布策略，然后点击创建。
灰度发布任务创建完成后将显示在灰度发布页面的发布任务页签。
参数描述 以下介绍如何设置灰度发布任务的参数。
基本信息
设置任务的名称。名称只能包含小写字母、数字和连字符（-），必须以小写字母或数字开头和结尾，最长 253 个字符。
服务设置
选择需要进行灰度发布的自制应用和服务。
点击下拉列表选择一个自制应用。
在需要进行灰度发布的服务右侧点击选择。
说明 灰度发布仅支持自制应用，不支持基于模板的应用。
新版本设置
设置新版本的服务版本号、容器组副本数量和容器。
参数 描述 新版本号
新版本的服务版本号。新版本号只能包含小写字母和数字, 最长 16 个字符。
副本
新版本的容器组副本数量。点击/可增加/减少容器组副本的数量。
添加容器
创建容器组中运行的容器。您可以在容器组中创建多个容器。
点击添加容器可创建容器。
将光标悬停在已创建的容器上，然后在右侧点击可编辑容器的设置。
将光标悬停在已创建的容器上，然后在右侧点击可删除容器。
直接在文本框中输入容器镜像的 URL 可替换旧版本的容器镜像，同时保持其他容器设置不变。
新版本设置 &amp;gt; 添加容器 &amp;gt; 容器设置</description>
    </item>
    
    <item>
      <title>查看灰度发布任务列表</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/02-view-a-grayscale-release-task-list/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/02-view-a-grayscale-release-task-list/</guid>
      <description>本节介绍如何查看灰度发布任务列表。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 查看权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
操作步骤 以具有 Service Mesh 查看权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在灰度发布页面，点击发布任务打开灰度发布任务列表。
灰度发布任务列表提供以下信息：
参数 描述 名称
灰度发布任务的名称、应用、发布模式和服务。
版本
新旧版本的版本号和容器组副本数量。
流量
新旧版本的每秒请求数量。
请求成功率
新旧版本的成功请求百分比。
请求延迟
新旧版本的平均请求延迟。</description>
    </item>
    
    <item>
      <title>查看灰度发布任务详情</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/03-view-grayscale-release-task-details/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/03-view-grayscale-release-task-details/</guid>
      <description>本节介绍如何查看灰度发布任务详情。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 查看权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
操作步骤 以具有 Service Mesh 查看权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在灰度发布页面，点击发布任务，然后点击一个灰度发布任务的名称打开其详情页面。
灰度发布任务详情页面提供以下信息：
参数 描述 名称
灰度发布任务的名称和发布模式。
版本
新旧版本的容器组副本数量、容器组名称、CPU 用量和内存用量。
流量分配
对于蓝绿部署，显示当前接收全部流量的服务版本。
对于金丝雀发布，显示新旧版本的流量接收比例。
对于流量镜像，显示旧版本接收新版本流量的相同副本。
发布策略
立即切换：立即将全部流量切换到对应版本。
就绪后切换：等待对应版本的容器组就绪后自动切换流量。
暂停切换：主动暂停流量切换，保持当前流量分配状态。
流量
新旧版本的每秒请求数量。
请求成功率
新旧版本的成功请求百分比。
请求延迟
新旧版本的平均请求延迟。</description>
    </item>
    
    <item>
      <title>切换上线版本（蓝绿部署）</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/04-switch-versions-blue-green-deployment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/04-switch-versions-blue-green-deployment/</guid>
      <description>本节介绍如何为蓝绿部署任务切换上线版本。
根据业务需要，您可以一键设置蓝绿部署任务中的新版本或旧版本立即接管全部业务流量。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 管理权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
操作步骤 以具有 Service Mesh 管理权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在灰度发布页面，点击发布任务，然后点击一个蓝绿部署任务的名称打开其详情页面。
在版本区域，在一个版本右上角点击，然后在下拉列表中选择接管可设置该版本立即接管全部业务流量。</description>
    </item>
    
    <item>
      <title>调整流量分配比例（金丝雀发布）</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/05-adjust-traffic-distribution-ratio-canary-release/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/05-adjust-traffic-distribution-ratio-canary-release/</guid>
      <description>本节介绍如何为金丝雀发布任务调整流量分配比例。
根据业务需要，您可以手动调整金丝雀发布任务中的新版本和旧版本接收业务流量的分配比例。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 管理权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
操作步骤 以具有 Service Mesh 管理权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在灰度发布页面，点击发布任务，然后点击一个金丝雀发布任务的名称打开其详情页面。
在流量分配区域，拖动滑块调整新旧版本接收流量的比例，然后在弹出的对话框中点击确定。系统将按照设置的比例在新旧版本之间分配业务流量。
（可选）在版本区域，在一个版本右上角点击，然后在下拉列表中选择接管可设置该版本立即接管全部业务流量。</description>
    </item>
    
    <item>
      <title>编辑灰度发布任务设置</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/06-edit-settings-of-a-grayscale-release-task/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/06-edit-settings-of-a-grayscale-release-task/</guid>
      <description>本节介绍如何编辑灰度发布任务设置。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 管理权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
操作步骤 以具有 Service Mesh 管理权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在灰度发布页面，点击发布任务，然后点击一个灰度发布任务的名称打开其详情页面。
在版本区域，在新版本右上角点击，然后在下拉列表中选择编辑。
在新版本设置页签，点击/可增加/减少容器组副本的数量。
说明 灰度发布不支持修改新版本的版本号和容器镜像。
点击策略设置页签，设置灰度发布任务的流量转发策略和发布策略，然后点击确定。
对于蓝绿部署，在新版本或旧版本右侧点击接管可将业务流量全部转发给该版本。
对于金丝雀发布任务，您可以选择指定新旧版本的流量分配比例，或根据请求参数将请求转发给新版本或旧版本。
参数 描述 指定流量分配
拖动滑块可设置新旧版本接收业务流量的百分比。
指定请求参数
将参数满足特定条件的请求转发给新版本，其他请求转发给旧版本。
说明 流量镜像任务将业务流量的副本发送给新版本进行测试，而不实际暴露新版本，所以不需要设置业务流量转发策略。
策略设置 &amp;gt; 发布策略
参数 描述 立即切换
立即将全部流量切换到对应版本。
就绪后切换
等待对应版本的容器组就绪后自动切换流量。
暂停切换
主动暂停流量切换，保持当前流量分配状态。</description>
    </item>
    
    <item>
      <title>删除灰度发布任务</title>
      <link>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/07-delete-a-grayscale-release-task/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/v4.2.0/11-use-extensions/06-service-mesh/02-grayscale-release/07-delete-a-grayscale-release-task/</guid>
      <description>本节介绍如何删除灰度发布任务。
警告 只有在新旧版本之一已接管全部业务流量时才能删除灰度发布任务。灰度发布任务删除后，未接管业务流量的版本（服务、工作负载和容器组）也将被删除。
前提条件 您需要加入一个项目并在项目中具有 Service Mesh 管理权限。有关更多信息，请参阅项目成员和项目角色。
KubeSphere 企业版平台需要安装并启用 KubeSphere 服务网格扩展组件。
新旧版本之一已接管全部业务流量。有关更多信息，请参阅切换上线版本（蓝绿部署）和调整流量分配比例（金丝雀发布）。
操作步骤 以具有 Service Mesh 管理权限的用户登录 KubeSphere 企业版 Web 控制台并进入您的企业空间。
在左侧导航栏选择灰度发布 &amp;gt; 灰度发布。
在灰度发布页面，点击发布任务，然后点击一个灰度发布任务的名称打开其详情页面。
在灰度发布任务的详情页面右上角，点击删除。
系统将删除灰度发布任务，同时删除未接管业务流量的版本。</description>
    </item>
    
  </channel>
</rss>
